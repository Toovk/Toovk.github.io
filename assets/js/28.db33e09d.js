(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{627:function(t,e,a){"use strict";a.r(e);var _=a(4),s=Object(_.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("strong",[t._v("可缓存的静态资源：JS、CSS、Img")])]),t._v(" "),a("h2",{attrs:{id:"_1-强制缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-强制缓存"}},[t._v("#")]),t._v(" 1）强制缓存")]),t._v(" "),a("p",[a("img",{staticStyle:{width:"80%"},attrs:{src:"https://img-blog.csdnimg.cn/bbbf9ae7c7974379b69012a451328467.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeHhseUA=,size_20,color_FFFFFF,t_70,g_se,x_16\n",title:"cache"}})]),t._v(" "),a("h3",{attrs:{id:"返回头-cache-control"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#返回头-cache-control"}},[t._v("#")]),t._v(" 返回头 Cache-Control：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在 Responnst Headers 中")])]),t._v(" "),a("li",[a("p",[t._v("控制强制缓存的逻辑")])]),t._v(" "),a("li",[a("p",[t._v("例如 Cache-Control：max-age=31536000（单位是秒）相当于一年")])])]),t._v(" "),a("h3",{attrs:{id:"cache-control-的值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache-control-的值"}},[t._v("#")]),t._v(" cache-control 的值")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("max-age：设置过期时间")])]),t._v(" "),a("li",[a("p",[t._v("no-cache：不用本地缓存，正常向服务端请求，可以用到协商缓存")])]),t._v(" "),a("li",[a("p",[t._v("no-store：不用本地缓存，也不用服务端的服务措施")])]),t._v(" "),a("li",[a("p",[t._v("private： 只允许最终用户进行缓存")])]),t._v(" "),a("li",[a("p",[t._v("public： 允许路由或者代理进行缓存")])])]),t._v(" "),a("p",[a("strong",[t._v("补充：关于Expires")])]),t._v(" "),a("p",[t._v("同在 Response Headers 中")]),t._v(" "),a("p",[t._v("同为控制缓存过期")]),t._v(" "),a("p",[t._v("已被 Cache-control 代替")]),t._v(" "),a("h2",{attrs:{id:"_2-协商缓存-对比缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-协商缓存-对比缓存"}},[t._v("#")]),t._v(" 2）协商缓存（对比缓存）")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("它是一个服务器端缓存策略")])]),t._v(" "),a("li",[a("p",[t._v("服务器判断客户端资源，是否和服务器端资源一样")])]),t._v(" "),a("li",[a("p",[t._v("一致的话返回 "),a("code",[t._v("304")]),t._v(" ，否则返回 200 和最新的资源")])])]),t._v(" "),a("img",{staticStyle:{width:"80%"},attrs:{src:"https://img-blog.csdnimg.cn/5c4a0747b6e3485c831bb1746be8d51b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeHhseUA=,size_20,color_FFFFFF,t_70,g_se,x_16"}}),t._v(" "),a("p",[a("strong",[t._v("什么是资源标识？")])]),t._v(" "),a("h3",{attrs:{id:"在-response-headers-中-有两种"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-response-headers-中-有两种"}},[t._v("#")]),t._v(" 在 Response Headers 中，有两种")]),t._v(" "),a("h3",{attrs:{id:"last-modified-资源的最后修改时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#last-modified-资源的最后修改时间"}},[t._v("#")]),t._v(" Last-Modified 资源的最后修改时间")]),t._v(" "),a("img",{staticStyle:{width:"80%"},attrs:{src:"https://img-blog.csdnimg.cn/3202eac06ab2455ebbcb3a63addaa1f0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeHhseUA=,size_20,color_FFFFFF,t_70,g_se,x_16"}}),t._v(" "),a("p",[t._v("如果说请求带的 "),a("code",[t._v("If-Modified-Since")]),t._v(" 和服务端判断一致，表示没有修改过资源，返回304资源。如果修改过，重新返回一个新的Last-Modified和资源")]),t._v(" "),a("h3",{attrs:{id:"etag-资源的唯一标识-一个字符串-类似人类的指纹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etag-资源的唯一标识-一个字符串-类似人类的指纹"}},[t._v("#")]),t._v(" Etag 资源的唯一标识（一个字符串，类似人类的指纹）")]),t._v(" "),a("img",{staticStyle:{width:"80%"},attrs:{src:"https://img-blog.csdnimg.cn/deb0657a443c4457858c0f75c9c0671b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeHhseUA=,size_20,color_FFFFFF,t_70,g_se,x_16"}}),t._v(" "),a("p",[t._v("如果说请求带的 "),a("code",[t._v("If-None-Match")]),t._v(" 和服务端判断一致，返回304资源。如果不一致，重新返回一个新的E-tag和资源")]),t._v(" "),a("p",[a("strong",[t._v("Last-Modified 和 Etg")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("会优先使用 Etag")])]),t._v(" "),a("li",[a("p",[t._v("Last-Modified 只能精确到秒级")])]),t._v(" "),a("li",[a("p",[t._v("然后资源被重复生成，而内容不变，则 Etag 更精确")])])]),t._v(" "),a("h2",{attrs:{id:"_3-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-总结"}},[t._v("#")]),t._v(" 3）总结")]),t._v(" "),a("img",{staticStyle:{width:"80%"},attrs:{src:"https://img-blog.csdnimg.cn/f31bb278f1134937a6c8d9da1210cc49.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAeHhseUA=,size_20,color_FFFFFF,t_70,g_se,x_16"}}),t._v(" "),a("p",[t._v("首先发送http请求：")]),t._v(" "),a("p",[t._v("=> "),a("code",[t._v("Max-age")]),t._v("判断缓存是否过期")]),t._v(" "),a("p",[t._v("=> 如果没有过期，读取缓存（强制缓存），页面呈现")]),t._v(" "),a("p",[t._v("=> 过期了，判断是否带有 "),a("code",[t._v("Etag 和 Last-Modified")])]),t._v(" "),a("p",[t._v("=> 如果没有带这两个标识，即向服务器发送http请求，再重新返回请求资源和状态码，最后页面呈现")]),t._v(" "),a("p",[t._v("=> 带了这两个标识，向服务器发起 http 请求带 "),a("code",[t._v("If-None-Match、If-Modified-Since")]),t._v("字段")]),t._v(" "),a("p",[t._v("=> 服务器判断是否可用，可用则返回304状态码读取缓存。不可用返回200状态码重新请求资源。")])])}),[],!1,null,null,null);e.default=s.exports}}]);